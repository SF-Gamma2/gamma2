name: Salesforce to Shutterstock Transfer

on:
  schedule:
    - cron: '0 * * * *' # Runs every hour
  workflow_dispatch: # Allows manual triggering

jobs:
  transfer:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'
    
    - name: Install dependencies
      run: npm install
    
    - name: Run transfer
      env:
        SF_USERNAME: ${{ secrets.SF_USERNAME }}
        SF_PASSWORD: ${{ secrets.SF_PASSWORD }}
        SF_SECURITY_TOKEN: ${{ secrets.SF_SECURITY_TOKEN }}
        SS_FTP_HOST: ${{ secrets.SS_FTP_HOST }}
        SS_FTP_USER: ${{ secrets.SS_FTP_USER }}
        SS_FTP_PASSWORD: ${{ secrets.SS_FTP_PASSWORD }}
      run: node index.js
